{"ast":null,"code":"import batch from 'it-batch';\n\nfunction balanced(source, reduce, options) {\n  return reduceToParents(source, reduce, options);\n}\n\nasync function reduceToParents(source, reduce, options) {\n  const roots = [];\n\n  for await (const chunked of batch(source, options.maxChildrenPerNode)) {\n    roots.push(await reduce(chunked));\n  }\n\n  if (roots.length > 1) {\n    return reduceToParents(roots, reduce, options);\n  }\n\n  return roots[0];\n}\n\nexport default balanced;","map":{"version":3,"sources":["/Users/g2musicgroup/Developer/NFT-starter/filecoin_nft_starter-main/node_modules/ipfs-unixfs-importer/esm/src/dag-builder/file/balanced.js"],"names":["batch","balanced","source","reduce","options","reduceToParents","roots","chunked","maxChildrenPerNode","push","length"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,UAAlB;;AACA,SAASC,QAAT,CAAkBC,MAAlB,EAA0BC,MAA1B,EAAkCC,OAAlC,EAA2C;AACzC,SAAOC,eAAe,CAACH,MAAD,EAASC,MAAT,EAAiBC,OAAjB,CAAtB;AACD;;AACD,eAAeC,eAAf,CAA+BH,MAA/B,EAAuCC,MAAvC,EAA+CC,OAA/C,EAAwD;AACtD,QAAME,KAAK,GAAG,EAAd;;AACA,aAAW,MAAMC,OAAjB,IAA4BP,KAAK,CAACE,MAAD,EAASE,OAAO,CAACI,kBAAjB,CAAjC,EAAuE;AACrEF,IAAAA,KAAK,CAACG,IAAN,CAAW,MAAMN,MAAM,CAACI,OAAD,CAAvB;AACD;;AACD,MAAID,KAAK,CAACI,MAAN,GAAe,CAAnB,EAAsB;AACpB,WAAOL,eAAe,CAACC,KAAD,EAAQH,MAAR,EAAgBC,OAAhB,CAAtB;AACD;;AACD,SAAOE,KAAK,CAAC,CAAD,CAAZ;AACD;;AACD,eAAeL,QAAf","sourcesContent":["import batch from 'it-batch';\nfunction balanced(source, reduce, options) {\n  return reduceToParents(source, reduce, options);\n}\nasync function reduceToParents(source, reduce, options) {\n  const roots = [];\n  for await (const chunked of batch(source, options.maxChildrenPerNode)) {\n    roots.push(await reduce(chunked));\n  }\n  if (roots.length > 1) {\n    return reduceToParents(roots, reduce, options);\n  }\n  return roots[0];\n}\nexport default balanced;"]},"metadata":{},"sourceType":"module"}